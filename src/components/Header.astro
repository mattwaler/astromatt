---
import { links, site } from '@/content.config'
import { Image } from 'astro:assets'
import logo from '@/assets/logo.svg'
import Menu from '@/assets/menu.svg'
import Close from '@/assets/close.svg'

const pathname = new URL(Astro.request.url).pathname
---

<header class="lg:absolute inset-x-0 top-0 z-50" x-data="{ isOpen: false }">
  <div class="container">
    <div class="">
      <nav
        class="h-20 flex items-center justify-between lg:justify-start"
        aria-label="Global"
      >
        <a href="/">
          <span class="sr-only">{site.name}</span>
          <Image
            src={logo}
            class="h-12 w-auto"
            height={200}
            width={160}
            alt=""
            format="webp"
          />
        </a>
        <button x-cloak @click="isOpen = !isOpen" type="button" class="rounded-md lg:hidden">
          <Menu x-show="!isOpen" />
          <Close x-show="isOpen" />
        </button>
        <div
          class="hidden lg:ml-12 lg:flex items-center lg:gap-x-14"
        >
          {
            links.map((link) => (
              <a
                href={link.href}
                class:list={[
                  'text-sm/6 font-semibold transition-colors',
                ]}
              >
                {link.name}
              </a>
            ))
          }
        </div>
      </nav>
    </div>
  </div>
  <div x-collapse x-cloak x-show="isOpen" class="container">
    <div class="pt-2 pb-4  flex flex-col lg:flex-row gap-x-8 gap-y-4 lg:items-center">
      {
        links.map((link) => (
          <a
            x-on:click="setTimeout(() => isOpen = false, 500)"
            href={link.href}
            class:list={[
              'text-base/6 font-semibold transition-colors',
            ]}
          >
            {link.name}
          </a>
        ))
      }
    </div>
  </div>
</header>
